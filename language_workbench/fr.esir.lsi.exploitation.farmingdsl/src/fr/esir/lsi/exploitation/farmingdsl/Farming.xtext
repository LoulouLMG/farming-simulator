// automatically generated by Xtext
grammar fr.esir.lsi.exploitation.farmingdsl.Farming with org.eclipse.xtext.common.Terminals

import "http://www.eclipse.org/emf/2002/Ecore" as ecore
import "platform:/resource/fr.esir.lsi.exploitation/model/activity.ecore" as activity

Model returns activity::Model:
	{activity::Model}
	'Model'
	'{'
		('ressourceTypes' '{' ressourceTypes+=ResourceType ( "," ressourceTypes+=ResourceType)* '}' )?
		('activities' '{' activities+=PeriodicActivity ( "," activities+=PeriodicActivity)* '}' )?
	'}';






ResourceType returns activity::ResourceType:
	{activity::ResourceType}
	name=EString;

PeriodicActivity returns activity::PeriodicActivity:
	{activity::PeriodicActivity}
	'PeriodicActivity'
	name=EString
	'{'
		('periodicity' periodicity=EInt)?
		('start' start=EDate)?
		('end' end=EDate)?
		('rules' '{' rules+=Rule ( "," rules+=Rule)* '}' )?
		('allocations' '{' allocations+=ResourceAllocation ( "," allocations+=ResourceAllocation)* '}' )?
	'}';

EString returns ecore::EString:
	STRING | ID;

EInt returns ecore::EInt:
	'-'? INT;

EDate returns ecore::EDate:
	'EDate' /* To do */;

Rule returns activity::Rule:
	{activity::Rule}
	'Rule'
	'{'
		('predicates' '{' predicates+=Predicate ( "," predicates+=Predicate)* '}' )?
	'}';

ResourceAllocation returns activity::ResourceAllocation:
	'resource' resource=[activity::ResourceType|EString] 
		('for' duration= EInt 'hours')?
	;

Predicate returns activity::Predicate:
	{activity::Predicate}
	'Predicate'
	;
